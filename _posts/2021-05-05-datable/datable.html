<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
  <title>Transformación de datos con el paquete data.table</title>

  <meta property="description" itemprop="description" content="Es una recopilación de &quot;data.table Introduction&quot; y &quot;Listen Data&quot;. Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2021-05-05"/>
  <meta property="article:created" itemprop="dateCreated" content="2021-05-05"/>
  <meta name="article:author" content="Franklin Santos"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Transformación de datos con el paquete data.table"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Es una recopilación de &quot;data.table Introduction&quot; y &quot;Listen Data&quot;. Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Transformación de datos con el paquete data.table"/>
  <meta property="twitter:description" content="Es una recopilación de &quot;data.table Introduction&quot; y &quot;Listen Data&quot;. Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","categories","author","date","preview","output"]}},"value":[{"type":"character","attributes":{},"value":["Transformación de datos con el paquete data.table"]},{"type":"character","attributes":{},"value":["Es una recopilación de \"data.table Introduction\" y \"Listen Data\". Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete.\n"]},{"type":"character","attributes":{},"value":["data.table","R","Data Science"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Franklin Santos"]},{"type":"character","attributes":{},"value":["https://franklinsantos.com"]},{"type":"character","attributes":{},"value":["Agritech Bolivia"]},{"type":"character","attributes":{},"value":["0000-0002-7509-2910"]}]}]},{"type":"character","attributes":{},"value":["05-05-2021"]},{"type":"character","attributes":{},"value":["dt.png"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["datable_files/anchor-4.2.2/anchor.min.js","datable_files/bowser-1.9.3/bowser.min.js","datable_files/distill-2.2.21/template.v2.js","datable_files/header-attrs-2.7/header-attrs.js","datable_files/jquery-1.11.3/jquery.min.js","datable_files/popper-2.6.0/popper.min.js","datable_files/tippy-6.2.7/tippy-bundle.umd.min.js","datable_files/tippy-6.2.7/tippy-light-border.css","datable_files/tippy-6.2.7/tippy.css","datable_files/tippy-6.2.7/tippy.umd.min.js","datable_files/webcomponents-2.0.0/webcomponents.js","dt.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="datable_files/header-attrs-2.7/header-attrs.js"></script>
  <script src="datable_files/jquery-1.11.3/jquery.min.js"></script>
  <script src="datable_files/popper-2.6.0/popper.min.js"></script>
  <link href="datable_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="datable_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="datable_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="datable_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="datable_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="datable_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="datable_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Transformación de datos con el paquete data.table","description":"Es una recopilación de \"data.table Introduction\" y \"Listen Data\". Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete.","authors":[{"author":"Franklin Santos","authorURL":"https://franklinsantos.com","affiliation":"Agritech Bolivia","affiliationURL":"#","orcidID":"0000-0002-7509-2910"}],"publishedDate":"2021-05-05T00:00:00.000+00:00","citationText":"Santos, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Transformación de datos con el paquete data.table</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">data.table</div>
<div class="dt=tag">R</div>
<div class="dt=tag">Data Science</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>Es una recopilación de “data.table Introduction” y “Listen Data”. Los ejemplos se tradujeron del Ingles al Español para facilitar la comprensión de este paquete.</p></p>
</div>

<div class="d-byline">
  Franklin Santos <a href="https://franklinsantos.com" class="uri">https://franklinsantos.com</a> (Agritech Bolivia)
  
<br/>05-05-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introducción">1. Introducción</a></li>
<li><a href="#procedimiento-con-data.table">2. Procedimiento con data.table</a>
<ul>
<li><a href="#sintaxis-de-data.table">2.1. Sintaxis de data.table</a></li>
<li><a href="#cómo-instalar-y-cargar-el-paquete-data.table">2.2. Cómo instalar y cargar el paquete <strong>data.table</strong></a></li>
<li><a href="#leer-o-importar-datos">2.3. Leer o importar datos</a></li>
<li><a href="#caracteristicas-de-los-datos">2.4. Caracteristicas de los datos</a></li>
<li><a href="#seleccionar-o-mantener-columnas">2.5. Seleccionar o mantener columnas</a></li>
<li><a href="#renombrar-variables">2.6. Renombrar variables</a></li>
<li><a href="#subconjunto-de-filasfiltrado">2.7. Subconjunto de filas/Filtrado</a></li>
<li><a href="#ordenar-los-datos">2.8. Ordenar los datos</a></li>
<li><a href="#adición-de-columnas-cálculo-sobre-filas">2.9. Adición de columnas (Cálculo sobre filas)</a></li>
<li><a href="#resumir-o-agregar-columnas">2.10. Resumir o agregar columnas</a></li>
<li><a href="#group-by-cálculo-dentro-del-grupo">2.11. GROUP BY (Cálculo dentro del grupo)</a></li>
</ul></li>
<li><a href="#conclusión">3. Conclusión</a></li>
</ul>
</nav>
</div>
<style>
body {
text-align: justify}
</style>
<h2 id="introducción">1. Introducción</h2>
<p>El paquete <strong>data.table</strong> es una interfaz de limpieza y transformación de datos altamente optimizada. Este paquete es áltamente eficiente para operar grandes tamaños de datos más conocido como <em>Big Data</em> (por ejemplo, más de 10 millones de filas o &gt; 10 GB). La mayor razón para usar <strong>data.table</strong> es simple: la velocidad.</p>
<p>Este paquete se diseñó para ser conciso y sin complicaciones. Hay algunas referencias que comparan <em>dplyr</em> vs <em>data.table</em> y en la cual <strong>data.table</strong> es el ganador. La eficiencia de este paquete también se comparó con el paquete de <strong>python</strong> (<em>panda</em>) y también gana <strong>data.table</strong>.</p>
<h2 id="procedimiento-con-data.table">2. Procedimiento con data.table</h2>
<h3 id="sintaxis-de-data.table">2.1. Sintaxis de data.table</h3>
<p>La sintaxis de <span class="my-color">data.table</span> se muestra en la siguiente imagen:</p>
<p><img src="dt.png" /></p>
<ul>
<li>El primer parámetro de data.table es <strong>i</strong> se refiere a las filas. Implica un subconjunto de filas. Equivale a la cláusula <em>WHERE</em> de SQL</li>
<li>El segundo parámetro de data.table es <strong>j</strong> se refiere a las columnas. Implica el subconjunto de columnas. Equivale a la cláusula <em>SELECT</em> en SQL.</li>
<li>El tercer parámetro de data.table es <strong>by</strong> se refiere a añadir un grupo para que todos los cálculos se hagan dentro de un grupo. Equivale a la cláusula <em>GROUP BY</em> de SQL.</li>
</ul>
<h3 id="cómo-instalar-y-cargar-el-paquete-data.table">2.2. Cómo instalar y cargar el paquete <strong>data.table</strong></h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"data.table"</span><span class='op'>)</span> <span class='co'>#Instalar el paquete</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-datatable.com'>data.table</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="leer-o-importar-datos">2.3. Leer o importar datos</h3>
<p>En el paquete <em>data.table</em>, la función <strong>fread()</strong> está disponible para leer u obtener datos de su ordenador o de una página web. Es equivalente a la función read.csv() de R básico.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#base de datos </span>
<span class='va'>mydata</span> <span class='op'>=</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/fread.html'>fread</a></span><span class='op'>(</span><span class='st'>"https://github.com/arunsrinivasan/satrdays-workshop/raw/master/flights_2014.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="caracteristicas-de-los-datos">2.4. Caracteristicas de los datos</h3>
<p>Este conjunto de datos contiene 253000 observaciones y 17 columnas. Constituye información sobre la hora de llegada o salida de los vuelos, los retrasos, la cancelación de vuelos y el destino en el año 2014.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span> <span class='co'>#número de filas</span>
</code></pre>
</div>
<pre><code>[1] 253316</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span> <span class='co'>#número de columnas</span>
</code></pre>
</div>
<pre><code>[1] 17</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span> <span class='co'>#nombre de las variables de respuesta</span>
</code></pre>
</div>
<pre><code> [1] &quot;year&quot;      &quot;month&quot;     &quot;day&quot;       &quot;dep_time&quot;  &quot;dep_delay&quot;
 [6] &quot;arr_time&quot;  &quot;arr_delay&quot; &quot;cancelled&quot; &quot;carrier&quot;   &quot;tailnum&quot;  
[11] &quot;flight&quot;    &quot;origin&quot;    &quot;dest&quot;      &quot;air_time&quot;  &quot;distance&quot; 
[16] &quot;hour&quot;      &quot;min&quot;      </code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span> <span class='co'>#mostrar las primeras filas de datos</span>
</code></pre>
</div>
<pre><code>   year month day dep_time dep_delay arr_time arr_delay cancelled
1: 2014     1   1      914        14     1238        13         0
2: 2014     1   1     1157        -3     1523        13         0
3: 2014     1   1     1902         2     2224         9         0
4: 2014     1   1      722        -8     1014       -26         0
5: 2014     1   1     1347         2     1706         1         0
6: 2014     1   1     1824         4     2145         0         0
   carrier tailnum flight origin dest air_time distance hour min
1:      AA  N338AA      1    JFK  LAX      359     2475    9  14
2:      AA  N335AA      3    JFK  LAX      363     2475   11  57
3:      AA  N327AA     21    JFK  LAX      351     2475   19   2
4:      AA  N3EHAA     29    LGA  PBI      157     1035    7  22
5:      AA  N319AA    117    JFK  LAX      350     2475   13  47
6:      AA  N3DEAA    119    EWR  LAX      339     2454   18  24</code></pre>
</div>
<h3 id="seleccionar-o-mantener-columnas">2.5. Seleccionar o mantener columnas</h3>
<p>Suponga que necesita seleccionar sólo la columna <code>origin</code>. Puede utilizar el siguiente código</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat1</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='va'>origin</span><span class='op'>]</span> <span class='co'>#devuelve un vector</span>
</code></pre>
</div>
</div>
<blockquote>
<p>La línea de código anterior devuelve un vector no una tabla de datos.</p>
</blockquote>
<p>Para obtener el resultado en formato data.table, ejecute el siguiente código:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat01</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='va'>origin</span><span class='op'>)</span><span class='op'>]</span> <span class='co'>#devuelve una tabla de datos</span>
</code></pre>
</div>
</div>
<h4 id="mantener-múltiples-columnas">2.5.1. Mantener múltiples columnas</h4>
<p>El siguiente código le dice a R que seleccione las columnas ‘origin’, ‘year’, ‘month’, y ‘hour’.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat2</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='va'>origin</span>, <span class='va'>year</span>, <span class='va'>month</span>, <span class='va'>hour</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dat2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   origin year month hour
1:    JFK 2014     1    9
2:    JFK 2014     1   11
3:    JFK 2014     1   19
4:    LGA 2014     1    7
5:    JFK 2014     1   13
6:    EWR 2014     1   18</code></pre>
</div>
<h4 id="mantener-varias-columnas-en-función-de-la-posición-de-la-columna">2.5.2. Mantener varias columnas en función de la posición de la columna</h4>
<p>Puede mantener de la segunda a la cuarta columna utilizando el siguiente código</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat3</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dat3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   month day dep_time
1:     1   1      914
2:     1   1     1157
3:     1   1     1902
4:     1   1      722
5:     1   1     1347
6:     1   1     1824</code></pre>
</div>
<h4 id="cómo-eliminar-una-columna">2.5.3. Cómo eliminar una columna</h4>
<p>Suponga que quiere incluir todas las variables excepto una columna, digamos ‘origin’. Se puede hacer fácilmente añadiendo el signo <strong>!</strong> (implica la negación en R)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat4</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"origin"</span><span class='op'>)</span><span class='op'>]</span> <span class='co'>#eliminar una sola columna</span>
<span class='va'>dat5</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"origin"</span>, <span class='st'>"year"</span>, <span class='st'>"month"</span><span class='op'>)</span><span class='op'>]</span> <span class='co'>#eliminar varias columnas</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>dat5</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   day dep_time dep_delay arr_time arr_delay cancelled carrier
1:   1      914        14     1238        13         0      AA
2:   1     1157        -3     1523        13         0      AA
3:   1     1902         2     2224         9         0      AA
4:   1      722        -8     1014       -26         0      AA
5:   1     1347         2     1706         1         0      AA
6:   1     1824         4     2145         0         0      AA
   tailnum flight dest air_time distance hour min
1:  N338AA      1  LAX      359     2475    9  14
2:  N335AA      3  LAX      363     2475   11  57
3:  N327AA     21  LAX      351     2475   19   2
4:  N3EHAA     29  PBI      157     1035    7  22
5:  N319AA    117  LAX      350     2475   13  47
6:  N3DEAA    119  LAX      339     2454   18  24</code></pre>
</div>
<h3 id="renombrar-variables">2.6. Renombrar variables</h3>
<p>Seleccionamos las columnas <code>arr_delay</code> y <code>dep_delay</code>, luego renombramos como <code>redelay_arr</code> y <code>redelay_dep</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ans</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span>delay_arr <span class='op'>=</span> <span class='va'>arr_delay</span>, delay_dep <span class='op'>=</span> <span class='va'>dep_delay</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>ans</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   delay_arr delay_dep
1:        13        14
2:        13        -3
3:         9         2
4:       -26        -8
5:         1         2
6:         0         4</code></pre>
</div>
<p><strong>Otra opción</strong> Puedes renombrar las variables con la función <strong>setnames()</strong>. En el siguiente código, estamos renombrando una variable <em>‘dest’</em> a <em>‘destination’</em>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fs01</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setattr.html'>setnames</a></span><span class='op'>(</span><span class='va'>mydata</span>,           <span class='co'>#datos</span>
         <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"month"</span><span class='op'>)</span>,        <span class='co'>#variable a renombrar</span>
         <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"meses"</span><span class='op'>)</span>  <span class='co'>#variable renombrada</span>
         <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Para renombrar múltiples variables, puedes simplemente añadir variables en ambos lados.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fs02</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setattr.html'>setnames</a></span><span class='op'>(</span><span class='va'>mydata</span>,           <span class='co'>#datos</span>
         <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"dest"</span>, <span class='st'>"origin"</span><span class='op'>)</span>,        <span class='co'>#variable a renombrar</span>
         <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Destination"</span>, <span class='st'>"origin.of.flight"</span><span class='op'>)</span>  <span class='co'>#variable renombrada</span>
         <span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="subconjunto-de-filasfiltrado">2.7. Subconjunto de filas/Filtrado</h3>
<p>Supongamos que se le pide que encuentre todos los vuelos cuyo origen sea “JFK”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat6</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='va'>origin</span> <span class='op'>==</span> <span class='st'>"JFK"</span><span class='op'>]</span> 
</code></pre>
</div>
</div>
<h4 id="seleccionar-varios-valores">2.7.1. Seleccionar varios valores</h4>
<p>Filtrar todos los vuelos cuyo origen sea “JFK” o "LGA</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat7</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='va'>origin</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"JFK"</span>, <span class='st'>"LGA"</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h4 id="aplicar-el-operador-lógico-not">2.7.2. Aplicar el operador lógico : NOT</h4>
<p>El siguiente código selecciona todos los vuelos cuyo origen no es igual a ‘JFK’ y ‘LGA’</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat8</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='op'>!</span><span class='va'>origin</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"JFK"</span>, <span class='st'>"LGA"</span><span class='op'>)</span><span class='op'>]</span> <span class='co'>#Excluir valores</span>
</code></pre>
</div>
</div>
<h4 id="filtro-basado-en-múltiples-variables">2.7.3. Filtro basado en múltiples variables</h4>
<p>Si necesita seleccionar todos los vuelos cuyo origen sea igual a ‘JFK’ y la compañía aérea = ‘AA’</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dat9</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='va'>origin</span> <span class='op'>==</span> <span class='st'>"JFK"</span> <span class='op'>&amp;</span> <span class='va'>carrier</span> <span class='op'>==</span> <span class='st'>"AA"</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h3 id="ordenar-los-datos">2.8. Ordenar los datos</h3>
<p>Podemos ordenar los datos utilizando la función <strong>setorder()</strong>, por defecto, ordena los datos en orden ascendente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata01</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setorder.html'>setorder</a></span><span class='op'>(</span><span class='va'>mydata</span>, <span class='va'>origin</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="ordenar-los-datos-en-orden-descendente">2.8.1. Ordenar los datos en orden descendente</h4>
<p>En este caso, estamos ordenando los datos por la variable <em>‘origin’</em> en orden descendente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata02</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setorder.html'>setorder</a></span><span class='op'>(</span><span class='va'>mydata</span>, <span class='op'>-</span><span class='va'>origin</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="ordenación-de-datos-basada-en-múltiples-variables">2.8.2. Ordenación de datos basada en múltiples variables</h4>
<p>En este ejemplo, le decimos a R que reordene los datos primero por el origen en orden ascendente y luego por la variable ‘carrier’ en orden descendente.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata03</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setorder.html'>setorder</a></span><span class='op'>(</span><span class='va'>mydata</span>, <span class='va'>origin</span>, <span class='op'>-</span><span class='va'>carrier</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="adición-de-columnas-cálculo-sobre-filas">2.9. Adición de columnas (Cálculo sobre filas)</h3>
<p>Puede realizar cualquier operación en las filas añadiendo el operador <strong>:=</strong>. En este ejemplo, estamos restando la variable <em>‘dep_delay’</em> de la variable <em>‘dep_time’</em> para calcular la hora de salida programada.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='va'>dep_sch</span> <span class='op'>:=</span> <span class='va'>dep_time</span><span class='op'>-</span><span class='va'>dep_delay</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h4 id="añadiendo-varias-columnas">2.9.1. Añadiendo varias columnas</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"dep_sch"</span>,<span class='st'>"arr_sch"</span><span class='op'>)</span><span class='op'>:=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>dep_time</span> <span class='op'>-</span> <span class='va'>dep_delay</span>, 
                                      <span class='va'>arr_time</span> <span class='op'>-</span> <span class='va'>arr_delay</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Si no quiere hacer cambios (adición de columnas) en los datos originales, puede hacer una copia de los mismos.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata_C</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/copy.html'>copy</a></span><span class='op'>(</span><span class='va'>mydata</span><span class='op'>)</span>
<span class='va'>mydata_C</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"dep_sch"</span>,<span class='st'>"arr_sch"</span><span class='op'>)</span><span class='op'>:=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>dep_time</span> <span class='op'>-</span> <span class='va'>dep_delay</span>, 
                                        <span class='va'>arr_time</span> <span class='op'>-</span> <span class='va'>arr_delay</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h3 id="resumir-o-agregar-columnas">2.10. Resumir o agregar columnas</h3>
<p>Al igual que el procedimiento <em>SAS</em> PROC MEANS, podemos generar estadísticas de resumen de variables específicas. En este caso, estamos calculando la media, la mediana, el valor mínimo y el máximo de la variable <em>arr_delay</em>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
           median <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
           min <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
           max <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>       mean median  min  max
1: 8.146702     -4 -112 1494</code></pre>
</div>
<h4 id="subconjunto-en-i-y-hacer-en-j">2.10.1. Subconjunto en i y hacer en j</h4>
<ul>
<li>Calcule el retraso promedio de llegada y salida de todos los vuelos con “JFK” como aeropuerto de origen en el mes de junio.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ans1</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='va'>origin</span> <span class='op'>==</span> <span class='st'>"JFK"</span> <span class='op'>&amp;</span> <span class='va'>month</span> <span class='op'>==</span> <span class='fl'>6L</span>,
               <span class='fu'>.</span><span class='op'>(</span>m_arr <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span><span class='op'>)</span>, m_dep <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>dep_delay</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>ans1</span>
</code></pre>
</div>
<pre><code>      m_arr    m_dep
1: 5.839349 9.807884</code></pre>
</div>
<ul>
<li><p>En primer lugar, se realiza un subconjunto en <strong>i</strong> para encontrar los índices de las filas que coinciden con el aeropuerto de origen igual a <code>"JFK"</code> y el mes igual a <code>6L</code>. Todavía no hacemos un subconjunto de toda la tabla de datos correspondiente a esas filas.</p></li>
<li><p>Ahora, miramos en <strong>j</strong> y descubrimos que sólo utiliza dos columnas. Y lo que tenemos que hacer es calcular su <code>mean()</code>. Por lo tanto, subconjuntamos sólo las columnas correspondientes a las filas que coinciden, y calculamos su <code>mean()</code>.</p></li>
</ul>
<p>Como los tres componentes principales de la consulta (<strong>i</strong>, <strong>j</strong> y <strong>by</strong>) están juntos dentro de <code>[...]</code>, data.table puede ver los tres y optimizar la consulta en conjunto antes de la evaluación, no cada uno por separado. Por lo tanto, podemos evitar el subconjunto completo (es decir, el subconjunto de las columnas además de <code>arr_delay</code> y <code>dep_delay</code>), tanto por velocidad como por eficiencia de memoria.</p>
<h4 id="resumir-múltiples-columnas">2.10.2. Resumir múltiples columnas</h4>
<p>Para resumir múltiples variables, podemos simplemente escribir toda la función de estadísticas de resumen en un corchete. Véase el siguiente comando.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>dep_delay</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>         V1       V2
1: 8.146702 12.46526</code></pre>
</div>
<p>Si necesita calcular estadísticas de resumen para una lista más amplia de variables, puede utilizar los operadores <strong>.SD</strong> y <strong>.SDcols</strong>. El operador <strong>.SD</strong> implica <em>subconjunto de datos</em>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>.SD</span>, <span class='va'>mean</span><span class='op'>)</span>, .SDcols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"arr_delay"</span>, <span class='st'>"dep_delay"</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   arr_delay dep_delay
1:  8.146702  12.46526</code></pre>
</div>
<p>En este caso, estamos calculando la media de dos variables - <em>arr_delay</em> y <em>dep_delay</em>.</p>
<h4 id="resumir-todas-las-columnas-numéricas">2.10.3. Resumir todas las columnas numéricas</h4>
<p>Por defecto, <strong>.SD</strong> toma todas las variables continuas (excluyendo las variables de agrupación).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>.SD</span>, <span class='va'>mean</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   year    month     day dep_time dep_delay arr_time arr_delay
1: 2014 5.638578 15.8937 1338.238  12.46526  1494.33  8.146702
   cancelled carrier tailnum  flight origin dest air_time distance
1:         0      NA      NA 1840.82     NA   NA 156.7228 1099.445
       hour      min  dep_sch  arr_sch
1: 13.06343 31.89482 1325.773 1486.183</code></pre>
</div>
<h4 id="resumir-con-múltiples-estadísticas">2.10.4. Resumir con múltiples estadísticas`</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>fs</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='va'>year</span>, <span class='va'>month</span>, <span class='va'>day</span>, <span class='va'>dep_delay</span>, <span class='va'>arr_time</span>, <span class='va'>hour</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>fs</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>.SD</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>mean<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, 
                               median<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>,
                               min <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>,
                               max <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>,
                               sd <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>       year     month       day  dep_delay  arr_time      hour
mean   2014  5.638578 15.893698   12.46526 1494.3299 13.063435
median 2014  6.000000 16.000000   -1.00000 1519.0000 13.000000
min    2014  1.000000  1.000000 -112.00000    1.0000  0.000000
max    2014 10.000000 31.000000 1498.00000 2400.0000 24.000000
sd        0  2.820866  8.763097   41.64876  533.8177  4.897891</code></pre>
</div>
<h3 id="group-by-cálculo-dentro-del-grupo">2.11. GROUP BY (Cálculo dentro del grupo)</h3>
<h4 id="resumir-by-group-origin">2.11.1. Resumir by group <code>origin</code></h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span>mean_arr_delay <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='va'>origin</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   origin mean_arr_delay
1:    EWR      10.026121
2:    JFK       7.731465
3:    LGA       6.601968</code></pre>
</div>
<h4 id="utilizar-la-columna-clave-en-una-operación-by">2.11.2. Utilizar la columna clave en una operación by</h4>
<p>En lugar de <code>by</code>, puede utilizar el operador <strong>keyby=</strong>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span>mean_arr_delay <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>, keyby <span class='op'>=</span> <span class='va'>origin</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   origin mean_arr_delay
1:    EWR      10.026121
2:    JFK       7.731465
3:    LGA       6.601968</code></pre>
</div>
<h4 id="resumir-múltiples-variables-by-group-origin">2.11.3. Resumir múltiples variables by group <code>origin</code></h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>arr_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, 
           <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>dep_delay</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>, 
       by <span class='op'>=</span> <span class='va'>origin</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   origin        V1       V2
1:    EWR 10.026121 15.21248
2:    JFK  7.731465 11.44617
3:    LGA  6.601968 10.60500</code></pre>
</div>
<p>O bien, puede escribirse como se indica a continuación</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>mydata</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>.SD</span>, <span class='va'>mean</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>, 
       .SDcols <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"arr_delay"</span>, <span class='st'>"dep_delay"</span><span class='op'>)</span>, 
       by <span class='op'>=</span> <span class='va'>origin</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   origin arr_delay dep_delay
1:    EWR 10.026121  15.21248
2:    JFK  7.731465  11.44617
3:    LGA  6.601968  10.60500</code></pre>
</div>
<ul>
<li>¿Cómo podemos obtener el número total de viajes para cada par de origen y destino para el código de la compañía aérea “AA”?</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>ans3</span> <span class='op'>&lt;-</span> <span class='va'>mydata</span><span class='op'>[</span><span class='va'>carrier</span> <span class='op'>==</span> <span class='st'>"AA"</span>, <span class='va'>.N</span>, by <span class='op'>=</span> <span class='fu'>.</span><span class='op'>(</span><span class='va'>origin</span>, <span class='va'>dest</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>ans3</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   origin dest    N
1:    EWR  LAX   62
2:    EWR  MIA  848
3:    EWR  DFW 1618
4:    EWR  PHX  121
5:    JFK  LAX 3387
6:    JFK  MIA 1876</code></pre>
</div>
<h2 id="conclusión">3. Conclusión</h2>
<ul>
<li>Este paquete es muy recomendable para ordenar o limpiar grandes cantidades de datos. Práctimamente <strong>data.table</strong> es una alternativa eficaz que el paquete <strong>dplyr</strong>.</li>
<li>Puede explorar más funciones en el <a href="https://github.com/rstudio/cheatsheets/raw/master/datatable.pdf">CHEAT SHEET</a> o introducción a <a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html">data.table</a></li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
